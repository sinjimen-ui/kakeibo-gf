<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<meta name="theme-color" content="#ff5aa5" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="default" />
<meta name="apple-mobile-web-app-title" content="家計簿" />
<title>家計簿</title>

<style>
:root{
  --bg1:#fff1f7;
  --bg2:#f6f1ff;
  --card:#ffffffcc;
  --border:rgba(0,0,0,.08);
  --text:#2a2a2a;
  --muted:#6b6b6b;
  --pink1:#ff7eb3;
  --pink2:#ff4d9d;
  --purple1:#7b7cff;
  --purple2:#5f61ff;
  --shadow: 0 12px 28px rgba(0,0,0,.10);
  --radius: 18px;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family: system-ui,-apple-system,"Hiragino Sans","Noto Sans JP",sans-serif;
  background:
    radial-gradient(1200px 700px at 15% 10%, var(--bg1), transparent 70%),
    radial-gradient(1200px 700px at 85% 0%, var(--bg2), transparent 70%);
  color:var(--text);
  min-height:100vh;
  padding-bottom:110px;
}

.wrap{
  max-width:520px;
  margin:0 auto;
  padding:14px;
}

/* ===== ヘッダー追従 ===== */
.header{
  position:sticky;
  top:0;
  z-index:998;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  padding:10px 0;
  background:rgba(255,255,255,.7);
  backdrop-filter:blur(12px);
  border-bottom:1px solid rgba(0,0,0,.06);
}

.title{
  font-weight:900;
  font-size:20px;
}

.pill{
  display:flex;
  gap:6px;
  align-items:center;
  background:rgba(255,255,255,.8);
  border-radius:999px;
  padding:6px 10px;
  border:1px solid var(--border);
}

.pill button{
  background:none;
  border:none;
  font-weight:800;
}

.ym{
  min-width:100px;
  text-align:center;
  font-weight:900;
}

/* ===== カード ===== */
.card{
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  border:1px solid var(--border);
  margin-top:14px;
  overflow:hidden;
}

.card-hd{
  padding:12px 14px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:rgba(255,255,255,.6);
  border-bottom:1px solid rgba(0,0,0,.06);
}

.card-bd{ padding:14px; }

.muted{ color:var(--muted); font-size:12px; }

/* ===== 入力（ズレ完全修正） ===== */
label{
  font-size:12px;
  font-weight:800;
  display:block;
  margin-bottom:6px;
}

input,select{
  width:100%;
  height:44px;
  padding:0 12px;
  border-radius:12px;
  border:1px solid rgba(0,0,0,.1);
  background:rgba(255,255,255,.9);
  font-size:14px;
  line-height:44px;
  vertical-align:middle;
}

input[type="number"]{
  -webkit-appearance:none;
  appearance:none;
}

textarea{
  width:100%;
  height:60px;
  padding:10px 12px;
  border-radius:12px;
  border:1px solid rgba(0,0,0,.1);
  background:rgba(255,255,255,.9);
}

.two{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}

/* ===== ボタン ===== */
.btn{
  height:46px;
  border:none;
  border-radius:999px;
  font-weight:900;
  cursor:pointer;
}

.btn.pink{
  background:linear-gradient(135deg,var(--pink1),var(--pink2));
  color:#fff;
}

.btn.purple{
  background:linear-gradient(135deg,var(--purple1),var(--purple2));
  color:#fff;
}

.btn.sm{ height:38px; }

/* ===== 円グラフ ===== */
.chart{
  width:260px;
  margin:0 auto;
}

canvas{ display:block; margin:auto; }

/* ===== ボトムナビ ===== */
.bottom-nav{
  position:fixed;
  left:0; right:0; bottom:0;
  padding:12px env(safe-area-inset-bottom);
  background:rgba(255,255,255,.9);
  backdrop-filter:blur(12px);
  border-top:1px solid rgba(0,0,0,.08);
}

.bottom-nav .inner{
  max-width:520px;
  margin:auto;
  display:flex;
  gap:12px;
}

.nav-btn{
  flex:1;
  height:54px;
  border:none;
  border-radius:28px;
  font-weight:900;
  color:#fff;
}

.nav-btn.add{
  background:linear-gradient(135deg,var(--pink1),var(--pink2));
}

.nav-btn.manage{
  background:linear-gradient(135deg,var(--purple1),var(--purple2));
}
</style>
</head>

<body>
<div class="wrap">

  <div class="header">
    <div class="title">家計簿</div>
    <div class="pill">
      <button id="prev">←</button>
      <div class="ym" id="ym"></div>
      <button id="next">→</button>
    </div>
  </div>

  <div class="card">
    <div class="card-hd">
      <strong>今月の支払い</strong>
      <span class="muted" id="total">¥0</span>
    </div>
    <div class="card-bd">
      <div class="chart">
        <canvas id="pie"></canvas>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card-hd">
      <strong>明細を追加</strong>
    </div>
    <div class="card-bd">
      <div class="two">
        <div>
          <label>日付</label>
          <input type="date" id="date">
        </div>
        <div>
          <label>金額（円）</label>
          <input type="number" id="amount" placeholder="例：3500">
        </div>
      </div>

      <div style="height:10px"></div>

      <button class="btn pink" style="width:100%">＋ 追加</button>
    </div>
  </div>

</div>

<div class="bottom-nav">
  <div class="inner">
    <button class="nav-btn add">＋ 入力</button>
    <button class="nav-btn manage">⚙ 管理</button>
  </div>
</div>

<script>
/* ===== Canvas ぼやけ完全対策 ===== */
function resizeCanvas(canvas, size){
  const dpr = window.devicePixelRatio || 1;
  canvas.style.width = size + "px";
  canvas.style.height = size + "px";
  canvas.width = size * dpr;
  canvas.height = size * dpr;
  const ctx = canvas.getContext("2d");
  ctx.setTransform(dpr,0,0,dpr,0,0);
  return ctx;
}

const canvas = document.getElementById("pie");
const ctx = resizeCanvas(canvas, 260);

ctx.fillStyle="#ff7eb3";
ctx.beginPath();
ctx.moveTo(130,130);
ctx.arc(130,130,100,0,Math.PI*2);
ctx.fill();

window.addEventListener("resize",()=>location.reload());
</script>
</body>
</html>
